<md-button ui-sref="main" aria-label="main">
    <ng-md-icon icon="reply" size="40"></ng-md-icon>
</md-button>

<div layout="column">

        <div layout="row" class="messageContainer" flex="100">
            <div layout="column" flex="100">
                <div ng-repeat="message in messagesToDisplay" on-finish-render idvalue="latest">
                    <p class="md-whiteframe-8dp" ng-class="(username == message.from) ? 'myMessage' : 'contactMessage'" ng-if="!$last">
                        <strong>{{(message.from == username) ? 'you' : message.from}}</strong> said: <br /> {{ (!message.isImage) ? message.message : '' }}
                        <img ng-if="message.isImage" src="{{message.message}}" />
                    </p>
                    <p class="md-whiteframe-8dp" ng-class="(username == message.from) ? 'myMessage' : 'contactMessage'" id="latest" ng-if="$last">
                        <strong>{{(message.from == username) ? 'you' : message.from}}</strong> said: <br /> {{ (!message.isImage) ? message.message : '' }}
                        <img ng-if="message.isImage" src="{{message.message}}" />
                    </p>
                </div>
            </div>
        </div>

    <div>
        <!--<md-button ng-click="testCanvas()">Test Canvas</md-button>-->
        <!--<canvas id="myCanvas" class="canvasCover" class="canvasCover"></canvas>-->
    </div>

    <div layout="row">
        <div flex-offset="15" flex="70">
            <md-input-container class="md-block">
                <!-- Use floating placeholder instead of label -->
                <md-icon>
                    <ng-md-icon icon="sms" class="blackIcon" size="32"></ng-md-icon>
                </md-icon>
                <textarea ng-model="message" type="text" placeholder="Message"></textarea>
            </md-input-container>
        </div>
        <div flex="20">
            <div layout="column">
                <md-button class="md-icon-button" aria-label="Exit" ng-click="sendMessage()">
                    <ng-md-icon icon="send" size="32"></ng-md-icon>
                    <md-tooltip md-direction="bottom">Send</md-tooltip>
                </md-button>
            </div>
            <div layout="column">
                <md-button class="md-icon-button" aria-label="Draw" ng-click="toggleDrawOptions()">
                    <ng-md-icon icon="brush" size="32"></ng-md-icon>
                    <md-tooltip md-direction="bottom">Draw Options</md-tooltip>
                </md-button>
            </div>
        </div>
    </div>

</div>

<!-- *********************************************************************************** -->
<!-- >> Draw Options << -->
<md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="drawOptions">
    <md-toolbar class="md-theme-light">
        <h1 class="md-toolbar-tools">Draw Options</h1>
    </md-toolbar>
    <md-button class="md-icon-button" ng-click="toggleDrawOptions()" layout="row" aria-label="Hide Draw Options">
        <ng-md-icon icon="visibility_off" class="blackIcon" size="25"></ng-md-icon>
        <md-tooltip md-direction="bottom">Hide Draw Options</md-tooltip>
    </md-button>

    <!-- Custom Directive -->
    <div chat-canvas></div>

</md-sidenav>
<!-- *********************************************************************************** -->
